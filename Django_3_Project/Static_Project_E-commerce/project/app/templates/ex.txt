from django.shortcuts import render
from .models import Client
# Create your views here.

def home(request):
    return render(request,'home.html')
def about(request):
    return render(request,'about.html')
def contact(request):
    return render(request,'contact.html')
def gallery(request):
    return render(request,'gallery.html')
def services(request):
    return render(request,'services.html')
def book_event(request):
    return render(request,'book_event.html')
def book_room(request):
    return render(request,'book_room.html')

def register(request):
    if request.method=='POST':
        username=request.POST.get('username')
        email=request.POST.get('email')
        phone=request.POST.get('phone')
        dob=request.POST.get('dob')
        gender=request.POST.get('gender')
        image=request.FILES.get('profile-pic')
        detail=request.POST.get('detail')
        password=request.POST.get('password')
        cpassword=request.POST.get('cpassword')
        print(username,email,phone,dob,gender,image,detail,password,cpassword)

        data=Client.objects.filter(clt_email=email)

        if data:
            msg = "Email already registered. Please log in"
            return render(request, 'register.html', {'msg': msg, 'msg_type': 'email_error'})
    
        else:
            if password==cpassword:
                Client.objects.create(clt_username=username,clt_email=email,clt_phone=phone,clt_dob=dob,clt_gender=gender,clt_image=image,clt_detail=detail,clt_password=password,clt_cpassword=cpassword)
                msg = "Registered Successfully!"
                return render(request, 'login.html', {'msg': msg, 'msg_type': 'success'})
            else:
                msg="Password and Confirm password not match"
                userdata={'username':username,'email':email,'phone':phone,'detail':detail}
                return render(request,'register.html',{'msg':msg,'msg_type': 'password_mismatch','data':userdata})
            
    else:
        return render(request,'register.html')

def login(request):
    if request.method=='POST':
        eml=request.POST.get('email')
        psw=request.POST.get('password')
        user=Client.objects.filter(clt_email=eml)

        if user:
            userdata=Client.objects.get(clt_email=eml)
            psw1=userdata.clt_password
            if psw==psw1:
                msg="Login Successfully"
                return render(request,'dashboard.html',{'userdata':userdata,'msg':msg,'msg_type': 'success'})
            else:
                msg="Passwords don‚Äôt match"
                return render(request,'login.html',{'email':eml,'msg':msg,'msg_type': 'password_mismatch'})

        else:
            msg="Email address not found."
            return render(request,'register.html',{'msg':msg,'msg_type': 'email_error'})

    else:
        return render(request,'login.html')
    
    
def home1(request,pk):
    userdata=Client.objects.get(id=pk)
    return render(request,'home.html',{'userdata':userdata})





def about1(request,pk):
    userdata=Client.objects.get(id=pk)
    return render(request,'about.html',{'userdata':userdata})

def gallery1(request,pk):
    userdata=Client.objects.get(id=pk)
    return render(request,'gallery.html',{'userdata':userdata})

def services1(request,pk):
    userdata=Client.objects.get(id=pk)
    return render(request,'services.html',{'userdata':userdata})

def contact1(request,pk):
    userdata=Client.objects.get(id=pk)
    return render(request,'contact.html',{'userdata':userdata})

def book_event1(request,pk):
    userdata=Client.objects.get(id=pk)
    return render(request,'book_event.html',{'userdata':userdata})

def book_room1(request,pk):
    userdata=Client.objects.get(id=pk)
    return render(request,'book_room.html',{'userdata':userdata})










from django.contrib import admin
from django.urls import path
from app import views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('',views.home,name='home'),
    path('about',views.about,name='about'),
    path('contact',views.contact,name='contact'),
    path('gallery',views.gallery,name='gallery'),
    path('services',views.services,name='services'),
    path('book_event',views.book_event,name='book_event'),
    path('book_room',views.book_room,name='book_room'),
    path('login',views.login,name='login'),
    path('register',views.register,name='register'),

    path('home/<int:pk>',views.home1,name='home1'),
    path('about/<int:pk>',views.about1,name='about1'),
    path('contact/<int:pk>',views.contact1,name='contact1'),
    path('gallery/<int:pk>',views.gallery1,name='gallery1'),
    path('services/<int:pk>',views.services1,name='services1'),
    path('book_event/<int:pk>',views.book_event1,name='book_event1'),
    path('book_room/<int:pk>',views.book_room1,name='book_room1'),
]












<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <title>{% block title %}{% endblock %}</title>
    {% load static %}
    {% block css %}
      <link rel="stylesheet" href="{% static 'css/style.css'  %}">
    {% endblock %}

  </head>
  
  <body>
    <nav class="navbar navbar-expand-lg navcolor">

      <div class="container-fluid">

        <a class="navbar-brand active" href="#">HMSüè©</a>

        <!-- <button class="navbar-toggler" type="button" data-bs-toggle="collapse" 
            data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            
        </button> -->
        {% if userdata %}

          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
             
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'home1' pk=userdata.id %}">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'about1' pk=userdata.id %}">About</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'gallery1' pk=userdata.id %}">Gallery</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'services1' pk=userdata.id %}">Sevices</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'contact1' pk=userdata.id %}">Contact</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'book_event1' pk=userdata.id %}">Book Event</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'book_room1' pk=userdata.id %}">Book Room</a>
                </li>

            </ul>
            <form class="d-flex">
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                 <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="#">{{ userdata.clt_username }}</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'home' %}">Logout</a>
                </li>
              </ul>
            </form>
          </div>
        {% else %}
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
             
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'home' %}">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'about' %}">About</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'gallery' %}">Gallery</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'services' %}">Sevices</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'contact' %}">Contact</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'book_event' %}">Book Event</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'book_room' %}">Book Room</a>
                </li>

            </ul>
            <form class="d-flex">
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'login' %}">Login</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{% url 'register' %}">Register</a>
                </li>
              </ul>
            </form>
          </div>  

        {% endif %}
      </div>
    </nav>

    <div>
      {% block content %}
      <h1>content part</h1>
      {% endblock %}
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
 ¬†</body>
</html>
